<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lesson 2 – Matrix Algebra | QuantQuest</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #00ffcc;
      --secondary: #ffcc00;
      --bg-dark: #0b0c2a;
      --bg-light: #141632;
      --text-main: #ffffff;
      --text-dim: #cccccc;
    }
    body {
      background-color: var(--bg-dark);
      color: var(--text-main);
      font-family: 'Roboto Mono', monospace;
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    h1, h2, h3 {
      font-family: 'Press Start 2P', cursive;
      color: var(--primary);
    }
    .section {
      margin-bottom: 3rem;
      border-left: 4px solid var(--primary);
      padding-left: 1.5rem;
    }
    .card {
      background-color: var(--bg-light);
      border: 2px solid var(--primary);
      border-radius: 4px;
      padding: 1rem;
      margin-top: 1rem;
    }
    .math {
      background: rgba(0,255,204,0.1);
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
    }
    .btn {
      background-color: var(--primary);
      color: #000;
      padding: 1rem;
      font-family: 'Press Start 2P', cursive;
      cursor: pointer;
      border-radius: 4px;
      display: inline-block;
      margin-top: 2rem;
    }
  </style>
</head>
<body>

  <h1>📘 Lesson 2: Matrix Algebra</h1>
  <p>The foundation of quantitative finance: portfolio optimization, PCA, and beyond.</p>

  <div class="section">
    <h2>🎯 Learning Goals</h2>
    <div class="card">
      <ul>
        <li>✓ Understand matrix structure and operations</li>
        <li>✓ Learn about inverses and determinants</li>
        <li>✓ Apply eigenvalue decomposition</li>
        <li>✓ Use matrices in financial applications</li>
      </ul>
    </div>
  </div>

  <div class="section">
    <h2>📖 Core Concepts</h2>
    <div class="card">
      <h3>Matrix Definition</h3>
      <p>A matrix is a rectangular array of numbers:</p>
      <div class="math">$$
      A = \begin{bmatrix}
      a & b & c \\\\
      d & e & f
      \end{bmatrix}
      $$</div>
      
      <h3>Matrix Multiplication</h3>
      <div class="math">$$
      (AB)_{ij} = \sum_k A_{ik} B_{kj}
      $$</div>
      <p>Matrix multiplication is associative but not commutative: \( AB \ne BA \)</p>

      <h3>Matrix Inverse</h3>
      <div class="math">$$
      A A^{-1} = I \quad \text{if} \quad \det(A) \ne 0
      $$</div>

      <h3>Eigen Decomposition</h3>
      <div class="math">$$
      A = Q \Lambda Q^{-1}
      $$</div>
      <p>Used in PCA and risk factor modeling.</p>
    </div>
  </div>

  <div class="section">
    <h2>💻 Try It Yourself (Python)</h2>
    <div class="card">
      <pre><code>import numpy as np

A = np.array([[1, 2], [3, 4]])
inv_A = np.linalg.inv(A)
eigvals, eigvecs = np.linalg.eig(A)

print("Inverse:\n", inv_A)
print("Eigenvalues:", eigvals)
print("Eigenvectors:\n", eigvecs)
      </code></pre>
    </div>
  </div>

  <div class="section">
    <h2>📈 Financial Applications</h2>
    <div class="card">
      <h3>Covariance Matrix</h3>
      <p>Measures risk and correlation:</p>
      <div class="math">$$
      \text{Var(portfolio)} = \vec{w}^T \Sigma \vec{w}
      $$</div>

      <h3>Markowitz Optimization</h3>
      <div class="math">$$
      \min_{\vec{w}} \vec{w}^T \Sigma \vec{w} \quad \text{s.t.} \quad \vec{w}^T \vec{\mu} = \mu_0
      $$</div>
    </div>
  </div>

   <div class="section">
    <h2 class="header-font">🧠 Knowledge Check</h2>
    <div class="card">
      <div class="quiz-box">
        <h3>Quick Quiz</h3>
        
        <!-- Question 1 -->
        <div class="mb-8">
          <h3 class="mb-2">1. What is the result of matrix multiplication \( \begin{bmatrix}1&2\\3&4\end{bmatrix} \begin{bmatrix}5\\7\end{bmatrix} \)?</h3>
          <label class="quiz-option"><input type="radio" name="q1" onclick="checkAnswer('q1', 'A')"> A) \( \begin{bmatrix}19\\43\end{bmatrix} \)</label>
          <label class="quiz-option"><input type="radio" name="q1" onclick="checkAnswer('q1', 'B')"> B) \( \begin{bmatrix}17\\39\end{bmatrix} \)</label>
          <label class="quiz-option"><input type="radio" name="q1" onclick="checkAnswer('q1', 'C')"> C) \( \begin{bmatrix}23\\47\end{bmatrix} \)</label>
          <p id="q1-result" class="mt-3 font-bold"></p>
        </div>

        <!-- Question 2 -->
        <div class="mb-8">
          <h3 class="mb-2">2. Which property makes a matrix suitable for Cholesky decomposition?</h3>
          <label class="quiz-option"><input type="radio" name="q2" onclick="checkAnswer('q2', 'A')"> A) Symmetric</label>
          <label class="quiz-option"><input type="radio" name="q2" onclick="checkAnswer('q2', 'B')"> B) Positive Definite</label>
          <label class="quiz-option"><input type="radio" name="q2" onclick="checkAnswer('q2', 'C')"> C) Orthogonal</label>
          <p id="q2-result" class="mt-3 font-bold"></p>
        </div>

        <!-- Question 3 -->
        <div class="mb-8">
          <h3 class="mb-2">3. In portfolio optimization, what does the covariance matrix represent?</h3>
          <label class="quiz-option"><input type="radio" name="q3" onclick="checkAnswer('q3', 'A')"> A) Expected returns</label>
          <label class="quiz-option"><input type="radio" name="q3" onclick="checkAnswer('q3', 'B')"> B) Asset volatilities and correlations</label>
          <label class="quiz-option"><input type="radio" name="q3" onclick="checkAnswer('q3', 'C')"> C) Trading volumes</label>
          <p id="q3-result" class="mt-3 font-bold"></p>
        </div>

        <button class="btn mt-6" onclick="showAllAnswers()">Reveal All Answers</button>
      </div>
    </div>
  </div>

  <div class="section">
    <h2>🚀 Next Steps</h2>
    <div class="card">
      <h3>📚 Recommended Resources</h3>
      <ul>
        <li><a href="https://numpy.org/doc/stable/reference/routines.linalg.html" target="_blank">NumPy Docs</a> – Learn all matrix routines</li>
        <li><a href="https://quant.stackexchange.com/questions/tagged/matrix" target="_blank">Quant StackExchange</a> – Ask questions or read solutions</li>
      </ul>

      <h3>🧪 Try This</h3>
      <ol>
        <li>Implement a Markowitz portfolio in Python with 3 assets</li>
        <li>Visualize the covariance matrix as a heatmap</li>
        <li>Use eigenvalues to reduce portfolio dimensions via PCA</li>
      </ol>

      <button class="btn" onclick="markLessonComplete()">Mark Lesson Complete</button>
    </div>
  </div>
<script>
    const answers = {
      q1: {
        correct: "A",
        explanation: "✅ Correct! [1*5 + 2*7, 3*5 + 4*7] = [19, 43]"
      },
      q2: {
        correct: "B",
        explanation: "✅ Correct! Cholesky requires positive definite matrices (common in covariance matrices)"
      },
      q3: {
        correct: "B",
        explanation: "✅ Correct! Covariance matrix captures both individual volatilities (diagonal) and correlations (off-diagonal)"
      }
    };

    function checkAnswer(question, selected) {
      const result = document.getElementById(`${question}-result`);
      const answer = answers[question];
      
      if (selected === answer.correct) {
        result.innerHTML = answer.explanation;
        result.style.color = "#00ff99";
      } else {
        result.innerHTML = "❌ Incorrect. Try again!";
        result.style.color = "#ff6666";
      }
    }
    
    function showAllAnswers() {
      Object.keys(answers).forEach(q => {
        const answer = answers[q];
        document.getElementById(`${q}-result`).innerHTML = answer.explanation;
        document.getElementById(`${q}-result`).style.color = "#00ff99";
      });
    }
  </script>
  <script type="module">
  import { markLessonComplete } from "./complete.js";
  window.markLessonComplete = markLessonComplete;
</script>

<script>
  const currentLessonId = "math1_lesson2";  // ← změň číslo lekce podle souboru
  const XP_REWARD = 150;                   // ← volitelně změň odměnu za lekci
</script>
<script type="module" src="/complete.js"></script>

</body>
</html>
